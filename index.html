<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Motiva.me - CIEP 183 João Vitta</title>
  <style>
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; background-color: #fff; }
    header { display: flex; align-items: center; justify-content: space-between; background-color: #fff; padding: 10px 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    header img { height: 80px; }
    .textos { font-size: 1rem; color: #333; }
    .subtext { font-size: 0.9rem; color: #777; }
    #socialHeader { display: flex; align-items: center; gap: 8px; }
    #socialHeader img { height: 24px; cursor: pointer; }
    .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; padding: 20px; }
    .card img { width: 100%; border-radius: 8px; }
    footer { padding: 20px; text-align: center; background-color: #f7f7f7; }
    .creditos { margin-top: 20px; font-size: 0.8rem; color: #555; }
    .info-msg { margin-top: 10px; color: green; font-size: 0.9rem; }
  </style>
</head>
<body>

<header>
  <img src="assets/logo_motivame.png" alt="logo Motiva.me">
  <div class="textos">CIEP 183 JOÃO VITTA<br><span class="subtext">Inspirando forças para transformar vidas.</span></div>
  <div id="socialHeader">
    <span>Siga-nos</span>
    <a href="https://instagram.com/" target="_blank">
      <img src="instagram_icon.png" alt="Instagram">
    </a>
  </div>
</header>

<div class="grid" id="gridImagens"></div>

<footer>
  <form id="formMotivacao">
    <label for="mensagem">Deixe sua mensagem de motivação para os jovens:</label><br>
    <textarea id="mensagem" name="mensagem" placeholder="Escreva aqui..." required></textarea><br>

    <label for="nome">Seu nome (opcional):</label><br>
    <input type="text" id="nome" name="nome" placeholder="Seu nome"><br>

    <div>
      <input type="checkbox" id="anonimo" name="anonimo">
      <label for="anonimo">Enviar anonimamente</label>
    </div>

    <button type="submit">Enviar</button>
    <div class="info-msg" id="infoMsg"></div>
  </form>

  <div class="creditos">© Mônica Lima - Ctrl X <span id="anoAtual"></span></div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
  emailjs.init("FnhDPuvUd77_2JkKW");

  document.getElementById('anoAtual').textContent = new Date().getFullYear();

  fetch('https://docs.google.com/spreadsheets/d/e/2PACX-1vTXIrIUjF9AK224uSnpV8yyCTGVWR2MNa_xn-LzVG38Akp9LoSztjBrUPWKwfV9pl8ZkoRgq00_ATlG/pub?gid=0&single=true&output=csv')
    .then(response => response.text())
    .then(data => {
      const linhas = data.split('\n').slice(1);
      const grid = document.getElementById('gridImagens');

      linhas.forEach(linha => {
        const [titulo, url] = linha.split(',');
        if (titulo && url) {
          const card = document.createElement('div');
          card.classList.add('card');
          card.innerHTML = `<img src="${url}" alt="${titulo}"><p>${titulo}</p>`;
          grid.appendChild(card);
        }
      });
    })
    .catch(error => console.error('Erro ao carregar planilha:', error));

  document.getElementById('formMotivacao').addEventListener('submit', e => {
    e.preventDefault();

    const mensagem = document.getElementById('mensagem').value;
    const nome = document.getElementById('nome').value;
    const anonimo = document.getElementById('anonimo').checked;
    const remetente = anonimo ? 'Anônimo' : nome || 'Anônimo';

    emailjs.send("service_pq03f2d", "template_dsk1hn8", {
      message: mensagem,
      from_name: remetente
    })
    .then(() => {
      document.getElementById('infoMsg').textContent = 'Mensagem enviada com sucesso! Obrigado!';
      e.target.reset();
    })
    .catch(error => {
      document.getElementById('infoMsg').textContent = 'Erro ao enviar. Tente novamente.';
      console.error(error);
    });
  });
</script>

</body>
</html>
