<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Motiva.me</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #fff;
      margin: 0;
      padding: 20px;
      text-align: center;
    }
    header img {
      width: 250px; /* Logo maior */
      margin-bottom: 20px;
    }
    .grid {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
      margin-bottom: 40px;
    }
    .card {
      border: 1px solid #ccc;
      padding: 10px;
      width: 180px;
      box-shadow: 1px 1px 5px rgba(0,0,0,0.1);
      border-radius: 5px;
    }
    .card img {
      max-width: 100%;
      height: auto;
      border-radius: 3px;
    }
    .card .title {
      margin-top: 8px;
      font-weight: bold;
      font-size: 14px;
    }
    footer {
      font-size: 14px;
      color: #333;
      margin-top: 30px;
    }
    .social {
      margin-top: 10px;
    }
    .social img {
      width: 32px;
      vertical-align: middle;
      cursor: pointer;
    }
    /* Form básico */
    footer form {
      max-width: 400px;
      margin: 0 auto 30px auto;
      text-align: left;
    }
    footer form label {
      display: block;
      margin: 12px 0 6px;
    }
    footer form textarea, footer form input[type="text"] {
      width: 100%;
      padding: 8px;
      font-size: 14px;
      border-radius: 4px;
      border: 1px solid #ccc;
      resize: vertical;
    }
    .anonimo-container {
      margin: 10px 0;
      display: flex;
      align-items: center;
    }
    .anonimo-container input[type="checkbox"] {
      margin-right: 6px;
    }
    footer form button[type="submit"] {
      margin-top: 12px;
      padding: 10px 15px;
      font-size: 16px;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      width: 100%;
    }
    footer form button[type="submit"]:hover {
      background: #0056b3;
    }
    #infoMsg {
      margin-top: 10px;
      font-weight: bold;
      color: green;
    }
  </style>
</head>
<body>

  <header>
    <img src="assets/logo_motivame.png" alt="Logo Motiva.me" />
  </header>

  <main>
    <div class="grid" id="imagensContainer">
      <!-- Imagens carregadas aqui -->
    </div>
  </main>

  <footer>
    <form id="formMotivacao" aria-label="Formulário de envio de mensagem">
      <label for="mensagem">Deixe sua mensagem de motivação para os jovens:</label>
      <textarea id="mensagem" name="mensagem" placeholder="Escreva aqui..." required></textarea>

      <label for="nome">Seu nome (opcional):</label>
      <input type="text" id="nome" name="nome" placeholder="Seu nome">

      <div class="anonimo-container">
        <input type="checkbox" id="anonimo" name="anonimo" />
        <label for="anonimo">Enviar anonimamente</label>
      </div>

      <button type="submit">Enviar</button>
      <div class="info-msg" id="infoMsg" aria-live="polite"></div>
    </form>

    <div>© Mônica Lima - Ctrl X <span id="anoAtual"></span></div>
    <div class="social">
      <a href="https://www.instagram.com/seuInstagramAqui" target="_blank" rel="noopener noreferrer" aria-label="Instagram Motiva.me">
        <img src="assets/instagram_icon.png" alt="Instagram" />
      </a>
    </div>
  </footer>

  <!-- EmailJS SDK -->
  <script src="https://cdn.emailjs.com/sdk/3.2.0/email.min.js"></script>
  <script>
    emailjs.init('FnhDPuvUd77_2JkKW'); // Seu User ID EmailJS
  </script>

  <script>
    // Atualiza ano no rodapé
    document.getElementById('anoAtual').textContent = new Date().getFullYear();

    // URL da planilha CSV publicada
    const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTXIrIUjF9AK224uSnpV8yyCTGVWR2MNa_xn-LzVG38Akp9LoSztjBrUPWKwfV9pl8ZkoRgq00_ATlG/pub?output=csv';

    // Carrega as imagens da planilha e cria cards
    fetch(csvUrl)
      .then(response => response.text())
      .then(csvText => {
        const linhas = csvText.trim().split('\n');
        linhas.shift(); // Remove cabeçalho

        const container = document.getElementById('imagensContainer');

        linhas.forEach(linha => {
          const [titulo, url] = linha.split(',');

          const card = document.createElement('div');
          card.classList.add('card');

          const img = document.createElement('img');
          img.src = url.trim();
          img.alt = titulo.trim();

          const tituloEl = document.createElement('div');
          tituloEl.classList.add('title');
          tituloEl.textContent = titulo.trim();

          card.appendChild(img);
          card.appendChild(tituloEl);

          container.appendChild(card);
        });
      })
      .catch(err => {
        console.error('Erro ao carregar CSV:', err);
      });

    // Formulário com EmailJS
    const form = document.getElementById('formMotivacao');
    const infoMsg = document.getElementById('infoMsg');

    form.addEventListener('submit', (e) => {
      e.preventDefault();

      const mensagem = form.mensagem.value.trim();
      if (!mensagem) {
        infoMsg.style.color = 'red';
        infoMsg.textContent = 'Por favor, escreva uma mensagem.';
        return;
      }

      infoMsg.style.color = 'black';
      infoMsg.textContent = 'Enviando...';

      const nome = form.nome.value.trim();
      const anonimo = form.anonimo.checked;

      // Monta os dados para enviar ao EmailJS
      const templateParams = {
        mensagem: mensagem,
        nome: anonimo ? 'Anônimo' : (nome || 'Sem nome'),
      };

      emailjs.send('service_pq03f2d', 'template_dsk1hn8', templateParams)
        .then(() => {
          infoMsg.style.color = 'green';
          infoMsg.textContent = 'Mensagem enviada com sucesso! Obrigado!';
          form.reset();
        })
        .catch((error) => {
          infoMsg.style.color = 'red';
          infoMsg.textContent = 'Erro ao enviar a mensagem. Tente novamente.';
          console.error('EmailJS error:', error);
        });
    });
  </script>

</body>
</html>
